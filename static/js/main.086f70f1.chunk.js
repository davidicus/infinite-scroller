(this["webpackJsonpinfinite-message"]=this["webpackJsonpinfinite-message"]||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(29),c=a.n(r),i=a(77),o=a(156),l=a(149),u=(a(93),a(8)),d=a(153),j=a(159),h=a(158),m=a(75),b=a.n(m),g=a(163),x=a(151),O=a(161),p=a(74),f=a.n(p),v=a(160),w=a(162),y=a(70),S=a(72),k=a.n(S),T=a(73),_=a.n(T),D=a(150),N=a(167),R=a(157),M=a(2);function C(){var e=n.useState(document.querySelector("body").classList.contains("dark")),t=Object(u.a)(e,2),a=t[0],s=t[1];return Object(M.jsxs)(R.a,{color:"secondary",value:a?"dark-mode":"light-mode",exclusive:!0,onChange:function(){document.querySelector("body").classList.toggle("dark"),s((function(e){return!e}))},children:[Object(M.jsxs)(N.a,{value:"light-mode","aria-label":"Toggle light mode",className:"app-bar__mode-switch",children:[Object(M.jsx)(D.a,{title:"Toggle light mode",children:Object(M.jsx)(k.a,{size:"small",sx:{marginRight:"0.5rem"}})}),"Light mode"]}),Object(M.jsxs)(N.a,{value:"dark-mode","aria-label":"Toggle dark mode",className:"app-bar__mode-switch",children:[Object(M.jsx)(D.a,{title:"Toggle dark mode",children:Object(M.jsx)(_.a,{size:"small",sx:{marginRight:"0.5rem"}})}),"Dark mode"]})]})}function I(e){var t=e.itemsCount,a=Object(y.useLangDirection)(),s=n.useState(!1),r=Object(u.a)(s,2),c=r[0],i=r[1];return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(h.a,{sx:{flexGrow:1,position:"fixed",top:0,left:0,width:"100%",zIndex:"999"},className:"app-bar",children:Object(M.jsx)(j.a,{position:"static",children:Object(M.jsxs)(v.a,{children:[Object(M.jsx)(O.a,{className:"app-bar__menu-btn",size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{mr:2},onClick:function(){return i(!0)},children:Object(M.jsx)(f.a,{})}),Object(M.jsx)(w.a,{variant:"h6",noWrap:!0,component:"div",sx:{flexGrow:0,display:{sm:"block"}},children:"Messages"})]})})}),Object(M.jsx)(x.a,{anchor:"ltr"===a?"left":"right",open:c,onClose:function(){return i(!1)},children:Object(M.jsxs)(h.a,{className:"app-bar__drawer",role:"presentation",children:[Object(M.jsxs)(h.a,{role:"presentation",sx:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.5rem 0 0.5rem 1rem"},children:[Object(M.jsx)(w.a,{variant:"h6",noWrap:!0,component:"div",children:"Settings"}),Object(M.jsx)(O.a,{size:"large",edge:"start",color:"inherit","aria-label":"close drawer",sx:{mr:2},onClick:function(){return i(!1)},children:Object(M.jsx)(b.a,{})})]}),Object(M.jsx)(g.a,{}),Object(M.jsx)(h.a,{role:"presentation",sx:{padding:"1.5rem 1rem"},children:Object(M.jsx)(C,{})}),Object(M.jsx)(g.a,{}),Object(M.jsx)(h.a,{role:"presentation",sx:{padding:"1rem"},children:Object(M.jsxs)(w.a,{variant:"h6",noWrap:!0,component:"p",children:["Total messages loaded: ",t]})})]})})]})}I.defaultProps={itemsCount:0};var E=a(154),W=a(164),L=a(165),X=a(166),z=a(155),Y=a(7),A=a(76),B=a.n(A);function F(e){return e.changedTouches?e.changedTouches[0]:e}function P(e){var t,a=e.Element,s=e.children,r=e.className,c=e.handleDismissal,i=n.useState(),o=Object(u.a)(i,2),l=o[0],d=o[1],j=n.useState(!1),h=Object(u.a)(j,2),m=h[0],b=h[1],g=n.useState(),x=Object(u.a)(g,2),O=x[0],p=x[1],f=n.useState(0),v=Object(u.a)(f,2),w=v[0],y=v[1],S=n.useState(!1),k=Object(u.a)(S,2),T=k[0],_=k[1],D=n.useRef(0),N=n.useRef(0),R=n.useRef(0),C=n.useRef(0),I=n.useRef(0);n.useEffect((function(){O&&"right"===O&&b(!0)}),[O]);var E=n.useCallback((function(e){e&&d(e.getBoundingClientRect().height)}));function W(e){var t=F(e);p("none"),y(0),D.current=t.pageX,N.current=t.pageY,I.current=(new Date).getTime(),("DIV"===t.target.tagName||e.changedTouches)&&_(!0)}function L(e){var t=F(e);R.current=t.pageX-D.current,T&&R.current>0&&y(R.current)}function X(e){var t=F(e);_(!1),R.current=t.pageX-D.current,C.current=t.pageY-N.current,(new Date).getTime()-I.current<=1e3?Math.abs(t.pageX-D.current)>=150&&Math.abs(t.pageY-N.current)<=100?(p(t.pageX-D.current<0?"left":"right"),y(window.innerWidth+100)):Math.abs(t.pageY-N.current)>=150&&Math.abs(t.pageX-D.current)<=100?(p(t.pageY-N.current<0?"up":"down"),R.current=0,y(0)):y(0):y(0)}return Object(M.jsx)(a,{ref:E,className:B()((t={},Object(Y.a)(t,r,r),Object(Y.a)(t,"swipe--active",T),Object(Y.a)(t,"swipe--out",m),t)),style:{"--x-dist":w,"--height":l,willChange:m||T?"transform, max-height, opacity":null},onTouchStart:W,onTouchMove:L,onTouchEnd:X,onMouseDown:W,onMouseMove:L,onMouseUp:X,onTransitionEnd:function(){return m?c():null},children:s})}function U(e){var t=e.items,a=e.lastItemRef,n=e.loadMore,s=e.handleDismissal;function r(e){s((function(t){return t.filter((function(t){return t.id!==e}))}))}return Object(M.jsxs)("ul",{className:"message-list",children:[t.map((function(e,n){return t.length-5===n?Object(M.jsx)(P,{className:"message-list__item",handleDismissal:function(){return r(e.id)},children:Object(M.jsxs)(W.a,{ref:a,sx:{maxWidth:645,width:"90vw"},children:[Object(M.jsx)(L.a,{avatar:Object(M.jsx)(E.a,{className:"message-list__avatar","aria-label":"Author",src:"http://message-list.appspot.com".concat(e.author.photoUrl),alt:e.author.name}),title:e.author.name,subheader:new Intl.DateTimeFormat("en",{dateStyle:"full",timeStyle:"long"}).format(new Date(e.updated))}),Object(M.jsx)(X.a,{children:Object(M.jsx)(w.a,{variant:"body2",color:"text.secondary",children:e.content})})]})},e.id):Object(M.jsx)(P,{className:"message-list__item",handleDismissal:function(){return r(e.id)},children:Object(M.jsxs)(W.a,{sx:{maxWidth:645,width:"90vw"},children:[Object(M.jsx)(L.a,{avatar:Object(M.jsx)(E.a,{className:"message-list__avatar",sx:{background:"#eee"},"aria-label":"Author",src:"http://message-list.appspot.com".concat(e.author.photoUrl),alt:e.author.name}),title:e.author.name,subheader:new Intl.DateTimeFormat(navigator.language||navigator.userLanguage,{dateStyle:"long",timeStyle:"short"}).format(new Date(e.updated))}),Object(M.jsx)(X.a,{children:Object(M.jsx)(w.a,{variant:"body2",color:"text.secondary",children:e.content})})]})},e.id)})),null!==n?Object(M.jsx)("li",{className:"message-list__skeleton",sx:{maxWidth:645,width:"90vw"},children:Object(M.jsxs)(W.a,{sx:{maxWidth:645,width:"90vw"},children:[Object(M.jsx)(L.a,{avatar:Object(M.jsx)(z.a,{animation:"wave",variant:"circular",width:40,height:40}),title:Object(M.jsx)(z.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}),subheader:Object(M.jsx)(z.a,{animation:"wave",height:10,width:"40%"})}),Object(M.jsxs)(X.a,{children:[Object(M.jsx)(z.a,{animation:"wave",height:10,style:{marginBottom:6}}),Object(M.jsx)(z.a,{animation:"wave",height:10,width:"80%"})]})]})}):null]})}P.defaultProps={Element:"li"},U.defaultProps={items:[]};var q=a(17);a(101);var G=function(){var e=n.useState(1),t=Object(u.a)(e,2),a=t[0],s=t[1],r=function(e,t){var a=Object(n.useState)(!0),s=Object(u.a)(a,2),r=s[0],c=s[1],i=Object(n.useState)(!1),o=Object(u.a)(i,2),l=o[0],d=o[1],j=Object(n.useState)(null),h=Object(u.a)(j,2),m=h[0],b=h[1],g=Object(n.useState)([]),x=Object(u.a)(g,2),O=x[0],p=x[1];return Object(n.useEffect)((function(){c(!0),d(!1),fetch("".concat(e,"?pageToken=").concat(t,"&limit=10")).then((function(e){return e.json()})).then((function(e){c(!1),b(e.pageToken),p((function(t){return[].concat(Object(q.a)(t),Object(q.a)(e.messages))}))})).catch((function(e){c(!1),d(e),b(null)}))}),[e,t]),{loading:r,error:l,items:O,pageToken:m,setItems:p}}("http://message-list.appspot.com/messages",a),c=r.loading,i=r.error,o=r.items,l=r.pageToken,j=r.setItems;n.useEffect((function(){return function(){h.current&&h.current.disconnect()}}),[]);var h=n.useRef(),m=n.useCallback((function(e){var t;c||(h.current&&h.current.disconnect(),h.current=new IntersectionObserver((function(e){e[0].isIntersecting&&null!==l&&s(l)})),e&&(null===(t=h.current)||void 0===t||t.observe(e)))}),[c,l]);return Object(M.jsxs)("div",{className:"App",children:[Object(M.jsx)(I,{itemsCount:o.length,dismissed:o.length}),i?Object(M.jsxs)(d.a,{severity:"error",sx:{width:"60%",margin:"0 auto 1rem"},children:["ERROR: ",i.message]}):null,Object(M.jsx)(U,{items:o,lastItemRef:m,loadMore:l,handleDismissal:j})]})},J=Object(i.a)({palette:{primary:{main:"#5f41b0"},secondary:{main:l.a[300]}}});document.documentElement.setAttribute("lang",navigator.language||navigator.userLanguage),c.a.render(Object(M.jsx)(s.a.StrictMode,{children:Object(M.jsx)(o.a,{theme:J,children:Object(M.jsx)(G,{})})}),document.getElementById("root"))},93:function(e,t,a){}},[[102,1,2]]]);
//# sourceMappingURL=main.086f70f1.chunk.js.map